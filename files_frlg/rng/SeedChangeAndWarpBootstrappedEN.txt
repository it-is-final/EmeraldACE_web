@@ title = "Change PRNG seed and teleport (EN)"
@@ author = "final, Theocatic and Mettrich"
@@ exit = "Bootstrapped"
@@ filler4 = 0xffffffff

// This code requires a Box 14 exit code for grab ACE.
// It can be found here:
// https://pomeg-letterbombers.github.io/pokemon-ace-notes/frlg/exit-codes/box-14-exit/

// The teleportation will occur as soon as you log off Billâ€™s PC.
// This code is best ran in the Route 5 Daycare.

// The map list can be found here:
// https://pastebin.com/peDhNbEt

map_id = 0x0003

// `warp` determines which warp point you will teleport to.
// Use warp 3 for Zapdos

warp = 0

// Input the desired RNG state here

seed = 0x1234abcd

// Do not touch the below variables

// Teleport script:
//
// 39 YY XX WW 00 00 00 00 warp 0xYY 0xXX 0xWW
// FF @ illegal command, terminates script execution

script = ((warp & 0xff) << 24) | ((map_id & 0xffff) << 8) | 0x39

@@

MOV     r12, #0x3000000         ; sGlobalScriptContext addressing
ADCS    r11, r12, #0xc300       ; gRngValue addressing

ADC     r10, r4, #0xff0         ; Prepare script pointer (within gSaveDataBuffer)
STR     r10, [r12, #0xeb8]!     ; Store pointer in sGlobalScriptContext->scriptPtr

MOV     r12, #{script} ?5       ; Move script
STR     r12, [r10, #0]!         ; Store script

0xe3ffcccc                      ; MVNS r12, #0xcc00
ADCS    r11, r11, #0xc50        ; r11 = &gRngValue - 0xb0, fix CPSR
STRH    r12, [r10, #8]          ; Store script end

MOV     r12, #{seed} ?5
STR     r12, [r11, #0xb0]!      ; Store seed in gRngValue